<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elevadores Nacional | Portal Clientes | Emergencias 24h</title>
    <meta name="description" content="Mantenimiento y instalaci√≥n de elevadores. Acceso clientes 24/7.">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- BOT√ìN EMERGENCIA FLOATING -->
    <a href="https://wa.me/573000000000?text=üö® EMERGENCIA - Necesito soporte inmediato" 
       class="emergency-float" 
       target="_blank">
        üö® Emergencia 24h
    </a>

    <!-- HEADER CON LOGIN -->
    <header id="mainHeader">
        <div class="header-content">
            <h1>Elevadores Nacional</h1>
            <nav>
                <button onclick="scrollToSection('services')">Servicios</button>
                <button onclick="scrollToSection('emergency')">Emergencias</button>
                <button onclick="scrollToSection('quote')">Cotizar</button>
                <button id="authButton" onclick="toggleAuth()">Portal Clientes</button>
                <button id="logoutButton" onclick="logout()" style="display:none;">Salir</button>
            </nav>
        </div>
    </header>

    <!-- FORMULARIO LOGIN (oculto por defecto) -->
    <div id="authForm" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="toggleAuth()">&times;</span>
            <h2 id="authTitle">Iniciar Sesi√≥n</h2>
            <form onsubmit="handleAuth(event)">
                <input type="email" id="authEmail" placeholder="Correo electr√≥nico" required>
                <input type="password" id="authPassword" placeholder="Contrase√±a" required>
                <button type="submit" id="authSubmit">Entrar</button>
            </form>
            <p id="authToggle">
                ¬øNo tienes cuenta? <a href="#" onclick="toggleAuthMode()">Reg√≠strate</a>
            </p>
            <p id="authMessage"></p>
        </div>
    </div>

    <!-- HERO CON IMAGEN DE FONDO -->
    <section id="hero">
        <div class="hero-content">
            <h1>Movimiento sin l√≠mites. Seguridad sin compromisos.</h1>
            <p>Tiempo de respuesta <strong>menos de 30 min</strong> en todo el pa√≠s</p>
            <button onclick="scrollToSection('emergency')">Reportar Emergencia</button>
            <button onclick="scrollToSection('quote')" class="secondary">Solicitar Cotizaci√≥n</button>
        </div>
    </section>

    <!-- DASHBOARD CLIENTES (solo visible si logueado) -->
    <section id="clientDashboard" style="display: none;">
        <h2>Mi Panel de Control</h2>
        <div class="dashboard-grid">
            <div class="card">
                <h3>üìä Estado de Elevadores</h3>
                <p id="elevatorCount">Cargando...</p>
            </div>
            <div class="card">
                <h3>üìù Historial</h3>
                <ul id="maintenanceHistory"></ul>
            </div>
            <div class="card">
                <h3>üìÖ Pr√≥ximo Mantenimiento</h3>
                <p id="nextMaintenance">Cargando...</p>
            </div>
        </div>
    </section>

    <!-- SERVICIOS -->
    <section id="services">
        <h2>Servicios Especializados</h2>
        <div class="grid">
            <div class="card">
                <h3>üõ†Ô∏è Mantenimiento Multimarca</h3>
                <p>OTIS, KONE, Schindler, Thyssenkrupp</p>
                <button onclick="openChat()">Consultar</button>
            </div>
            <div class="card">
                <h3>‚ö° Modernizaci√≥n</h3>
                <p>Aumenta eficiencia energ√©tica un 40%</p>
                <button onclick="openChat()">Calcular ahorro</button>
            </div>
            <div class="card">
                <h3>üèóÔ∏è Instalaci√≥n</h3>
                <p>Proyectos llave en mano</p>
                <button onclick="scrollToSection('quote')">Iniciar proyecto</button>
            </div>
        </div>
    </section>

    <!-- FORMULARIO EMERGENCIA -->
    <section id="emergency">
        <h2>Reportar Emergencia</h2>
        <form id="emergencyForm">
            <input type="text" id="clientName" placeholder="Nombre del edificio" required>
            <input type="tel" id="clientPhone" placeholder="Tel√©fono de contacto" required>
            <select id="elevatorBrand" required>
                <option value="">Selecciona marca del elevador</option>
                <option>OTIS</option>
                <option>KONE</option>
                <option>Schindler</option>
                <option>Thyssenkrupp</option>
                <option>Otra</option>
            </select>
            <textarea id="problemDesc" placeholder="Describe el problema (opcional)"></textarea>
            <input type="file" id="problemPhoto" accept="image/*" capture="environment">
            <button type="submit">Enviar Emergencia</button>
        </form>
        <p id="emergencyStatus"></p>
    </section>

    <!-- FORMULARIO COTIZACI√ìN -->
    <section id="quote">
        <h2>Solicitar Cotizaci√≥n</h2>
        <form id="quoteForm">
            <input type="text" id="projectName" placeholder="Nombre del proyecto" required>
            <input type="email" id="clientEmail" placeholder="Correo electr√≥nico" required>
            <select id="serviceType" required>
                <option value="">Tipo de servicio</option>
                <option>Mantenimiento</option>
                <option>Modernizaci√≥n</option>
                <option>Instalaci√≥n nueva</option>
                <option>Inspecci√≥n t√©cnica</option>
            </select>
            <input type="text" id="location" placeholder="Ciudad / Departamento" required>
            <button type="submit">Enviar Solicitud</button>
        </form>
        <p id="quoteStatus"></p>
    </section>

    <!-- CHATBOT IA -->
    <div id="chatWidget">
        <div id="chatHeader" onclick="toggleChat()">
            <span>üí¨ Asistente Virtual</span>
        </div>
        <div id="chatBody">
            <div id="chatMessages"></div>
            <input type="text" id="chatInput" placeholder="Escribe..." onkeypress="handleChatEnter(event)">
            <button onclick="sendChat()">Enviar</button>
        </div>
    </div>

    <!-- COBERTURA NACIONAL -->
    <section id="coverage">
        <h2>Cobertura Nacional</h2>
        <table id="coverageTable">
            <thead>
                <tr>
                    <th>Ciudad</th>
                    <th>Tel√©fono</th>
                    <th>Tiempo respuesta</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Bogot√°</td><td>300 123 4567</td><td>20 min</td></tr>
                <tr><td>Medell√≠n</td><td>300 123 4568</td><td>25 min</td></tr>
                <tr><td>Cali</td><td>300 123 4569</td><td>30 min</td></tr>
            </tbody>
        </table>
    </section>

    <footer>
        <p>¬© 2024 Elevadores Nacional | Emergencias 24h: 300 123 4567</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/main.js"></script>
</body>
</html>
